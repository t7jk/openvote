(()=>{"use strict";var e,o={134(e,o,n){const i=window.wp.blocks,t=window.wp.element,l=window.wp.blockEditor,r=window.wp.components,s=window.wp.i18n,a=window.wp.apiFetch;var c=n.n(a);const v=window.ReactJSXRuntime,d=JSON.parse('{"UU":"evoting/poll"}');(0,i.registerBlockType)(d.UU,{edit:function({attributes:e,setAttributes:o}){const{pollId:n}=e,[i,a]=(0,t.useState)([]),[d,p]=(0,t.useState)(!0),[u,h]=(0,t.useState)(null),w=(0,l.useBlockProps)();(0,t.useEffect)(()=>{c()({path:"/evoting/v1/polls"}).then(e=>{a(e),p(!1)}).catch(()=>p(!1))},[]),(0,t.useEffect)(()=>{n?c()({path:`/evoting/v1/polls/${n}`}).then(e=>h(e)).catch(()=>h(null)):h(null)},[n]);const g=[{label:(0,s.__)("— Wybierz głosowanie —","evoting"),value:0},...i.map(e=>({label:e.title,value:e.id}))];return d?(0,v.jsx)("div",{...w,children:(0,v.jsx)(r.Placeholder,{icon:"yes-alt",label:(0,s.__)("E-Voting Poll","evoting"),children:(0,v.jsx)(r.Spinner,{})})}):(0,v.jsxs)("div",{...w,children:[(0,v.jsx)(l.InspectorControls,{children:(0,v.jsx)(r.PanelBody,{title:(0,s.__)("Ustawienia głosowania","evoting"),children:(0,v.jsx)(r.SelectControl,{label:(0,s.__)("Wybierz głosowanie","evoting"),value:n,options:g,onChange:e=>o({pollId:Number(e)})})})}),n?(0,v.jsxs)("div",{className:"evoting-block-preview",children:[(0,v.jsx)("h3",{children:u?u.title:(0,s.__)("Ładowanie…","evoting")}),u&&u.description&&(0,v.jsx)("p",{className:"evoting-block-preview__desc",children:u.description}),u&&u.questions&&(0,v.jsx)("ul",{className:"evoting-block-preview__questions",children:u.questions.map((e,o)=>(0,v.jsxs)("li",{children:[o+1,". ",e.text]},e.id))}),(0,v.jsx)("p",{className:"evoting-block-preview__note",children:(0,s.__)("Formularz głosowania wyświetli się na froncie.","evoting")})]}):(0,v.jsx)(r.Placeholder,{icon:"yes-alt",label:(0,s.__)("E-Voting Poll","evoting"),children:(0,v.jsx)(r.SelectControl,{label:(0,s.__)("Wybierz głosowanie","evoting"),value:n,options:g,onChange:e=>o({pollId:Number(e)})})})]})},save:()=>null})}},n={};function i(e){var t=n[e];if(void 0!==t)return t.exports;var l=n[e]={exports:{}};return o[e](l,l.exports,i),l.exports}i.m=o,e=[],i.O=(o,n,t,l)=>{if(!n){var r=1/0;for(v=0;v<e.length;v++){for(var[n,t,l]=e[v],s=!0,a=0;a<n.length;a++)(!1&l||r>=l)&&Object.keys(i.O).every(e=>i.O[e](n[a]))?n.splice(a--,1):(s=!1,l<r&&(r=l));if(s){e.splice(v--,1);var c=t();void 0!==c&&(o=c)}}return o}l=l||0;for(var v=e.length;v>0&&e[v-1][2]>l;v--)e[v]=e[v-1];e[v]=[n,t,l]},i.n=e=>{var o=e&&e.__esModule?()=>e.default:()=>e;return i.d(o,{a:o}),o},i.d=(e,o)=>{for(var n in o)i.o(o,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:o[n]})},i.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),(()=>{var e={57:0,350:0};i.O.j=o=>0===e[o];var o=(o,n)=>{var t,l,[r,s,a]=n,c=0;if(r.some(o=>0!==e[o])){for(t in s)i.o(s,t)&&(i.m[t]=s[t]);if(a)var v=a(i)}for(o&&o(n);c<r.length;c++)l=r[c],i.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return i.O(v)},n=globalThis.webpackChunkevoting=globalThis.webpackChunkevoting||[];n.forEach(o.bind(null,0)),n.push=o.bind(null,n.push.bind(n))})();var t=i.O(void 0,[350],()=>i(134));t=i.O(t)})();