(()=>{"use strict";var e={n:o=>{var n=o&&o.__esModule?()=>o.default:()=>o;return e.d(n,{a:n}),n},d:(o,n)=>{for(var l in n)e.o(n,l)&&!e.o(o,l)&&Object.defineProperty(o,l,{enumerable:!0,get:n[l]})},o:(e,o)=>Object.prototype.hasOwnProperty.call(e,o)};const o=window.wp.blocks,n=window.wp.element,l=window.wp.blockEditor,t=window.wp.components,i=window.wp.i18n,s=window.wp.apiFetch;var a=e.n(s);const r=window.ReactJSXRuntime,c=JSON.parse('{"UU":"evoting/poll"}');(0,o.registerBlockType)(c.UU,{edit:function({attributes:e,setAttributes:o}){const{pollId:s}=e,[c,d]=(0,n.useState)([]),[p,w]=(0,n.useState)(!0),[v,u]=(0,n.useState)(null),g=(0,l.useBlockProps)();(0,n.useEffect)(()=>{a()({path:"/evoting/v1/polls"}).then(e=>{d(e),w(!1)}).catch(()=>w(!1))},[]),(0,n.useEffect)(()=>{s?a()({path:`/evoting/v1/polls/${s}`}).then(e=>u(e)).catch(()=>u(null)):u(null)},[s]);const h=[{label:(0,i.__)("— Wybierz głosowanie —","evoting"),value:0},...c.map(e=>({label:e.title,value:e.id}))];return p?(0,r.jsx)("div",{...g,children:(0,r.jsx)(t.Placeholder,{icon:"yes-alt",label:(0,i.__)("E-Voting Poll","evoting"),children:(0,r.jsx)(t.Spinner,{})})}):(0,r.jsxs)("div",{...g,children:[(0,r.jsx)(l.InspectorControls,{children:(0,r.jsx)(t.PanelBody,{title:(0,i.__)("Ustawienia głosowania","evoting"),children:(0,r.jsx)(t.SelectControl,{label:(0,i.__)("Wybierz głosowanie","evoting"),value:s,options:h,onChange:e=>o({pollId:Number(e)})})})}),s?(0,r.jsxs)("div",{className:"evoting-block-preview",children:[(0,r.jsx)("h3",{children:v?v.title:(0,i.__)("Ładowanie…","evoting")}),v&&v.description&&(0,r.jsx)("p",{className:"evoting-block-preview__desc",children:v.description}),v&&v.questions&&(0,r.jsx)("ul",{className:"evoting-block-preview__questions",children:v.questions.map((e,o)=>(0,r.jsxs)("li",{children:[o+1,". ",e.text]},e.id))}),(0,r.jsx)("p",{className:"evoting-block-preview__note",children:(0,i.__)("Formularz głosowania wyświetli się na froncie.","evoting")})]}):(0,r.jsx)(t.Placeholder,{icon:"yes-alt",label:(0,i.__)("E-Voting Poll","evoting"),children:(0,r.jsx)(t.SelectControl,{label:(0,i.__)("Wybierz głosowanie","evoting"),value:s,options:h,onChange:e=>o({pollId:Number(e)})})})]})},save:()=>null})})();